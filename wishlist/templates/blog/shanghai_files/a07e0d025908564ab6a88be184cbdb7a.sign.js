(function(a){with(a){
a.Vs=function(b){var c=ua(b);return function(){var d=this||fa,d=d.closure_memoize_cache_||(d.closure_memoize_cache_={}),e;e=arguments;for(var g=[c],h=e.length-1;0<=h;--h)g.push(typeof e[h],e[h]);e=g.join("\x0B");return d.hasOwnProperty(e)?d[e]:d[e]=b.apply(this,arguments)}},a.Ws=function(){T.call(this)};y(Ws,T);Ws.prototype.B=function(){this.o(document.body)};
Ws.prototype.C=function(b){function c(b,c,d){if(B){var e=function(){c.css("display","");b.css("display","");var e=G;dn(e);en(e,d)};c.show().fadeOut(150,function(){b.css({opacity:0.5,right:-20,position:"relative",display:"block"}).animate({opacity:1,right:0},150,e)})}else{B=j;b.show();var g=G;dn(g);en(g,d)}}function d(){B=n;r.hide();w.show()}function e(){$(this).trigger("requestStory")}function g(){var b=m.filter(".current");b.length&&l.css("top",b.position().top+b.height()/2-10)}Ws.n.C.call(this,
b);var h={member:Vs(function(b){return $.get("/node/HomeHeroStoryV2",{params:{member_hash:b}})}),topic:Vs(function(b){return $.get("/node/HomeTopicStoryV2",{params:{url_token:b}})})},l=$("div.single-story > .icon-sign").addClass("visible"),m=$("a.rep"),p=k;m.mouseenter(function(){p=setTimeout(v(e,this),500)}).mouseleave(function(){clearTimeout(p)}).click(e).on("requestStory",function(){var b=$(this),c=b.data(),d=c.type,c=c.token;b.addClass("current").siblings().removeClass("current");g();h[d](c).done(function(c){$(".single-story-inner").fadeOut(150,
function(){$(this).remove();$(c).insertAfter(l).hide().fadeIn(150)});b.trigger("afterRequestStory")})});g();var r=$("div.mobi-front"),w=$("div.desk-front");r.find(".js-signin, .js-signup").click(function(){w.find(".js-title-label").text("返回");w.find(".return").off().click(function(){window.location.hash=""});d()});this.h().e(window,"hashchange",function(){var b=window.location.hash.slice(1);"signin"===b||"signup"===b?d():(w.css("display",""),r.css("display",""))});this.h().e(Y,["accountcallback",
"sina_callback","qqconn_callback"],d);var B=n,b=window.location.hash.slice(1),H="signin"===b||"signup"!==b&&$("div.view-signin").hasClass("selected"),G=new bn({jw:function(b,d){"signin"===b?c(cn(G,"signin"),cn(G,"signup"),b):"signup"===b?c(cn(G,"signup"),cn(G,"signin"),b):G.R.jw.call(G,b,d)}});("signin"===b||"signup"===b)&&d();G.ig=j;G.ml=H?"signin":"signup";G.o(I("js-sign-flow"));$.each({".app-link.ios":["click_zhihu_ios_dl_link","homepage_not_logged_in"],".app-link.android":["click_zhihu_android_dl_link",
"homepage_not_logged_in"],'a.app-download-button[href^="http://itunes"]':["click_zhihu_ios_dl_link","homepage_mobile_big_not_logged_in"],'a.app-download-button[href^="https://play.google.com"]':["click_zhihu_android_dl_link","homepage_mobile_big_not_logged_in"]},function(b,c){$(b).on("click",function(){W.apply(k,["app-promotion"].concat(c))})});if(!ub){var b=$("div.single-story"),S=$("div.rep"),X=k,ja=function(){var b=S.filter(":not(.current)").get();z.QU(b);return b[0]},H=function(){X||(X=setInterval(function(){$(ja()).trigger("requestStory")},
5E3))},Oa=function(){clearInterval(X);X=k};b.hover(Oa,H);S.on("requestStory",Oa).on("afterRequestStory",H);b={start:H,stop:Oa};b.start();b=b.stop;this.Zo||(this.Zo=[]);this.Zo.push(v(b,i))}};Ca("ZH.entrySignPage",function(){(new Ws).B()});Lf("sign");}})(zhihu);
//@ sourceURL=http://static.zhihu.com/static/compiled/sign.js